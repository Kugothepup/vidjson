<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Veo3 Prompt Builder - Working Version</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 30px 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 30px;
            padding: 40px;
        }

        .panel {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 25px;
        }

        .panel h3 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.4rem;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }

        .control-group {
            margin-bottom: 20px;
        }

        .control-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #2c3e50;
        }

        .control-group input,
        .control-group select,
        .control-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .control-group input:focus,
        .control-group select:focus,
        .control-group textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .control-group textarea {
            height: 80px;
            resize: vertical;
        }

        .slider-group {
            margin-bottom: 15px;
        }

        .slider-group input[type="range"] {
            width: 100%;
            margin: 10px 0;
        }

        .slider-value {
            text-align: center;
            font-weight: 600;
            color: #667eea;
            margin-top: 5px;
        }

        .scene-preview {
            background: #2c3e50;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            color: white;
            font-family: monospace;
            min-height: 200px;
        }

        .json-output {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            line-height: 1.5;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
            margin-top: 20px;
        }

        .btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
            transition: background 0.3s ease;
            width: 100%;
            margin-top: 15px;
        }

        .btn:hover {
            background: #5a6fd8;
        }

        .btn-success {
            background: #27ae60;
        }

        .btn-success:hover {
            background: #229954;
        }

        .info-box {
            background: #e8f4ff;
            border: 1px solid #b3d9ff;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            font-size: 14px;
        }

        .tips {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            font-size: 14px;
        }

        .tips h4 {
            color: #856404;
            margin-bottom: 10px;
        }

        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üé¨ Veo3 Prompt Builder</h1>
            <p>Professional JSON prompt generation with interactive controls</p>
        </div>

        <div class="main-content">
            <!-- Scene Controls -->
            <div class="panel">
                <h3>üéõÔ∏è Scene Configuration</h3>
                
                <div class="control-group">
                    <label for="fov">Camera FOV: <span id="fovValue">50</span>¬∞</label>
                    <input type="range" id="fov" min="20" max="120" value="50" oninput="updateFOV(this.value)">
                    <div class="slider-value" id="lensType">Standard Lens (35-50mm)</div>
                </div>

                <div class="grid-2">
                    <div class="control-group">
                        <label for="shotType">Shot Type</label>
                        <select id="shotType" onchange="updateScene()">
                            <option value="wide">Wide Shot</option>
                            <option value="medium" selected>Medium Shot</option>
                            <option value="close-up">Close-up</option>
                            <option value="extreme close-up">Extreme Close-up</option>
                        </select>
                    </div>

                    <div class="control-group">
                        <label for="cameraAngle">Camera Angle</label>
                        <select id="cameraAngle" onchange="updateScene()">
                            <option value="eye-level" selected>Eye Level</option>
                            <option value="low angle">Low Angle</option>
                            <option value="high angle">High Angle</option>
                            <option value="bird's eye">Bird's Eye</option>
                            <option value="dutch angle">Dutch Angle</option>
                        </select>
                    </div>
                </div>

                <div class="grid-2">
                    <div class="control-group">
                        <label for="lighting">Lighting Style</label>
                        <select id="lighting" onchange="updateScene()">
                            <option value="natural" selected>Natural</option>
                            <option value="dramatic">Dramatic</option>
                            <option value="soft">Soft</option>
                            <option value="backlit">Backlit</option>
                        </select>
                    </div>

                    <div class="control-group">
                        <label for="timeOfDay">Time of Day</label>
                        <select id="timeOfDay" onchange="updateScene()">
                            <option value="dawn">Dawn</option>
                            <option value="day" selected>Day</option>
                            <option value="dusk">Dusk</option>
                            <option value="night">Night</option>
                        </select>
                    </div>
                </div>

                <div class="control-group">
                    <label for="weather">Weather</label>
                    <select id="weather" onchange="updateScene()">
                        <option value="clear" selected>Clear</option>
                        <option value="cloudy">Cloudy</option>
                        <option value="rainy">Rainy</option>
                        <option value="foggy">Foggy</option>
                        <option value="snowy">Snowy</option>
                    </select>
                </div>

                <div class="scene-preview" id="scenePreview">
                    üì∑ Camera: medium shot, 50¬∞ FOV, eye-level
                    üí° Lighting: natural, day
                    üå§Ô∏è Weather: clear
                    
                    Scene Analysis:
                    - Lens Type: Standard (natural perspective)
                    - Mood: Bright, clean aesthetic
                    - Atmosphere: Clear daylight
                </div>

                <div class="tips">
                    <h4>üí° Scene Tips</h4>
                    <p><strong>FOV Guide:</strong> 20-35¬∞ = Telephoto, 35-55¬∞ = Standard, 55¬∞+ = Wide Angle</p>
                    <p><strong>Angles:</strong> Low angle = powerful, High angle = vulnerable</p>
                </div>
            </div>

            <!-- Prompt Components -->
            <div class="panel">
                <h3>üìù 8-Component Framework</h3>
                
                <div class="control-group">
                    <label for="subject">1. Subject</label>
                    <textarea id="subject" placeholder="Detailed character/object description..." oninput="updatePrompt()"></textarea>
                </div>

                <div class="control-group">
                    <label for="action">2. Action</label>
                    <textarea id="action" placeholder="What they're doing..." oninput="updatePrompt()"></textarea>
                </div>

                <div class="control-group">
                    <label for="scene">3. Scene</label>
                    <textarea id="scene" placeholder="Location, time, props..." oninput="updatePrompt()"></textarea>
                </div>

                <div class="control-group">
                    <label for="camera">4. Camera</label>
                    <textarea id="camera" placeholder="Movement: dolly, pan, tracking..." oninput="updatePrompt()"></textarea>
                </div>

                <div class="control-group">
                    <label for="composition">5. Composition</label>
                    <textarea id="composition" placeholder="Framing, rule of thirds..." oninput="updatePrompt()"></textarea>
                </div>

                <div class="control-group">
                    <label for="ambiance">6. Ambiance</label>
                    <textarea id="ambiance" placeholder="Lighting and mood..." oninput="updatePrompt()"></textarea>
                </div>

                <div class="control-group">
                    <label for="audio">7. Audio</label>
                    <textarea id="audio" placeholder="Dialogue, ambient, music..." oninput="updatePrompt()"></textarea>
                </div>

                <div class="control-group">
                    <label for="style">8. Style</label>
                    <input type="text" id="style" placeholder="Visual aesthetic..." value="cinematic, photorealistic" oninput="updatePrompt()">
                </div>

                <button class="btn" onclick="generateSample()">üé≤ Generate Sample Scene</button>

                <div class="tips">
                    <h4>üé§ Audio Syntax</h4>
                    <p><strong>Correct:</strong> Character says: "dialogue"</p>
                    <p><strong>Wrong:</strong> Character says "dialogue" (causes subtitles)</p>
                </div>
            </div>

            <!-- JSON Output -->
            <div class="panel">
                <h3>üìã Generated JSON</h3>
                
                <div class="control-group">
                    <label for="caption">Caption (max 30 words)</label>
                    <input type="text" id="caption" placeholder="Brief video summary..." oninput="updateJSON()">
                </div>

                <div class="control-group">
                    <label for="filename">Filename</label>
                    <input type="text" id="filename" placeholder="video.mp4" value="video.mp4" oninput="updateJSON()">
                </div>

                <div class="json-output" id="jsonOutput">{
  "prompt": "Your structured prompt will appear here",
  "caption": "",
  "file_name": "video.mp4",
  "input_image_urls": [],
  "input_ids": []
}</div>

                <button class="btn btn-success" onclick="copyJSON()">üìã Copy JSON</button>
                <button class="btn" onclick="downloadJSON()">üíæ Download JSON</button>

                <div class="info-box">
                    <h4>üîß Usage Instructions</h4>
                    <p>1. Configure scene settings (left panel)</p>
                    <p>2. Fill in 8-component framework (center)</p>
                    <p>3. Copy generated JSON for Veo3 API</p>
                    <p>4. Use with Vertex AI, Gemini API, or third-party services</p>
                </div>

                <div class="tips">
                    <h4>üéØ Best Practices</h4>
                    <p>‚Ä¢ Be specific with character descriptions</p>
                    <p>‚Ä¢ Use precise filmmaking terminology</p>
                    <p>‚Ä¢ Layer audio: ambient + effects + music</p>
                    <p>‚Ä¢ Test with shorter prompts first</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentPrompt = {
            prompt: "",
            caption: "",
            file_name: "video.mp4",
            input_image_urls: [],
            input_ids: []
        };

        function updateFOV(value) {
            document.getElementById('fovValue').textContent = value;
            
            let lensType, effect;
            if (value < 25) {
                lensType = "Super Telephoto (200mm+)";
                effect = "Strong compression, isolated subjects";
            } else if (value < 35) {
                lensType = "Telephoto (85-135mm)";
                effect = "Portrait lens, natural compression";
            } else if (value < 55) {
                lensType = "Standard (35-50mm)";
                effect = "Natural perspective, human vision";
            } else if (value < 75) {
                lensType = "Wide Angle (24-35mm)";
                effect = "Expanded view, some distortion";
            } else {
                lensType = "Ultra Wide (14-24mm)";
                effect = "Dramatic perspective, high distortion";
            }
            
            document.getElementById('lensType').textContent = `${lensType} - ${effect}`;
            updateScene();
        }

        function updateScene() {
            const fov = document.getElementById('fov').value;
            const shotType = document.getElementById('shotType').value;
            const angle = document.getElementById('cameraAngle').value;
            const lighting = document.getElementById('lighting').value;
            const timeOfDay = document.getElementById('timeOfDay').value;
            const weather = document.getElementById('weather').value;

            const preview = `üì∑ Camera: ${shotType} shot, ${fov}¬∞ FOV, ${angle}
üí° Lighting: ${lighting}, ${timeOfDay}
üå§Ô∏è Weather: ${weather}

Scene Analysis:
- Lens Type: ${document.getElementById('lensType').textContent.split(' - ')[0]}
- Mood: ${getMoodDescription(lighting, timeOfDay, weather)}
- Atmosphere: ${getAtmosphereDescription(timeOfDay, weather)}`;

            document.getElementById('scenePreview').textContent = preview;
            updatePrompt();
        }

        function getMoodDescription(lighting, timeOfDay, weather) {
            const combinations = {
                'natural-day-clear': 'Bright, clean aesthetic with even lighting',
                'dramatic-dusk-rainy': 'Intense, moody with high contrast shadows',
                'soft-dawn-foggy': 'Ethereal, dreamlike with diffused light',
                'backlit-day-clear': 'Cinematic rim lighting with strong contrast'
            };
            return combinations[`${lighting}-${timeOfDay}-${weather}`] || `${lighting} ${timeOfDay} mood`;
        }

        function getAtmosphereDescription(timeOfDay, weather) {
            return `${timeOfDay} with ${weather} conditions`;
        }

        function updatePrompt() {
            const components = [
                getValue('subject') ? `Subject: ${getValue('subject')}` : '',
                getValue('action') ? `Action: ${getValue('action')}` : '',
                getValue('scene') ? `Scene: ${getValue('scene')}` : '',
                getValue('camera') ? `Camera: ${getValue('camera')}` : '',
                getValue('composition') ? `Composition: ${getValue('composition')}` : '',
                getValue('ambiance') ? `Ambiance: ${getValue('ambiance')}` : '',
                getValue('audio') ? `Audio: ${getValue('audio')}` : '',
                getValue('style') ? `Style: ${getValue('style')}` : ''
            ].filter(c => c);

            currentPrompt.prompt = components.join('. ');
            updateJSON();
        }

        function updateJSON() {
            currentPrompt.caption = getValue('caption');
            currentPrompt.file_name = getValue('filename') || 'video.mp4';
            
            document.getElementById('jsonOutput').textContent = JSON.stringify(currentPrompt, null, 2);
        }

        function getValue(id) {
            return document.getElementById(id).value.trim();
        }

        function generateSample() {
            document.getElementById('subject').value = "A woman in her late 20s, wearing an elegant, floor-length scarlet red dress, confident expression";
            document.getElementById('action').value = "walking slowly down a rain-slicked city street, looking over her shoulder mysteriously";
            document.getElementById('scene').value = "Downtown district at midnight, neon signs reflecting in wet pavement, narrow alleyway";
            document.getElementById('camera').value = "Smooth tracking shot following behind, 85mm lens with shallow depth of field";
            document.getElementById('composition').value = "Medium shot transitioning to close-up, rule of thirds composition";
            document.getElementById('ambiance').value = "Film noir aesthetic, high contrast lighting, deep blues and purples with crimson dress accent";
            document.getElementById('audio').value = "Audio: steady rain on pavement, distant jazz saxophone from a bar, her heels clicking on wet stone";
            document.getElementById('style').value = "cinematic, film noir, moody atmospheric lighting";
            document.getElementById('caption').value = "A woman in an elegant red dress walks mysteriously through a rainy noir cityscape";
            document.getElementById('filename').value = "noir-woman-rain.mp4";
            
            // Update scene settings
            document.getElementById('fov').value = 85;
            document.getElementById('shotType').value = "medium";
            document.getElementById('cameraAngle').value = "low angle";
            document.getElementById('lighting').value = "dramatic";
            document.getElementById('timeOfDay').value = "dusk";
            document.getElementById('weather').value = "rainy";
            
            updateFOV(85);
            updatePrompt();
        }

        function copyJSON() {
            const jsonText = document.getElementById('jsonOutput').textContent;
            navigator.clipboard.writeText(jsonText).then(() => {
                const btn = event.target;
                const originalText = btn.textContent;
                btn.textContent = '‚úÖ Copied!';
                setTimeout(() => {
                    btn.textContent = originalText;
                }, 2000);
            });
        }

        function downloadJSON() {
            const jsonText = document.getElementById('jsonOutput').textContent;
            const blob = new Blob([jsonText], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'veo3_prompt.json';
            a.click();
            URL.revokeObjectURL(url);
        }

        // Initialize
        updateScene();
    </script>
</body>
</html>